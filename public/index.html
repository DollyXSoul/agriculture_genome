<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Agricultural Genomics Align</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ğŸŒ¾ Skipâ€‘Aware Alignment</h1>
        <p>Linearâ€‘space DP with free skips over reference gaps</p>
      </header>

      <div class="tabs">
        <button class="tab-button active" onclick="showTab('text')">
          Text Input
        </button>
        <button class="tab-button" onclick="showTab('file')">
          File Upload
        </button>
      </div>

      <section id="text" class="tab-content active">
        <form id="text-align-form">
          <div class="form-group">
            <label>Reference (use '-' for known gaps)</label>
            <textarea
              id="reference"
              name="reference"
              placeholder="ACGT-ACGT"
              required
            ></textarea>
          </div>
          <div class="form-group">
            <label>Query</label>
            <textarea
              id="query"
              name="query"
              placeholder="ACGTACGT"
              required
            ></textarea>
          </div>
          <div class="form-group">
            <label>Band width (optional)</label>
            <input
              id="textBand"
              name="band"
              type="number"
              placeholder="e.g., 5000"
            />
          </div>
          <div class="form-group">
            <label
              ><input type="checkbox" id="textCounts" name="wantCounts" />
              detailed counts (short inputs only)</label
            >
          </div>
          <div class="form-group">
            <label
              ><input
                type="checkbox"
                id="textTranscript"
                name="wantTranscript"
              />
              show per-position operations</label
            >
          </div>
          <button type="submit">ğŸ§¬ Align</button>
        </form>
      </section>

      <section id="file" class="tab-content">
        <form id="file-align-form" enctype="multipart/form-data">
          <div class="form-group">
            <label>Reference FASTA/.fna</label>
            <input
              type="file"
              id="reference-file"
              name="referenceFile"
              accept=".fa,.fasta,.fna,.txt"
              required
            />
          </div>
          <div class="form-group">
            <label>Query FASTA/.fna</label>
            <input
              type="file"
              id="query-file"
              name="queryFile"
              accept=".fa,.fasta,.fna,.txt"
              required
            />
          </div>
          <div class="form-group">
            <label>Max bases per file (default 300,000)</label>
            <input
              id="maxLen"
              name="maxLen"
              type="number"
              value="300000"
              min="1000"
              step="1000"
            />
          </div>
          <div class="form-group">
            <label>Band width (optional)</label>
            <input
              id="band"
              name="band"
              type="number"
              placeholder="e.g., 5000"
            />
          </div>
          <div class="form-group">
            <label
              ><input type="checkbox" id="wantCounts" name="wantCounts" />
              detailed counts (short inputs only)</label
            >
          </div>
          <div class="form-group">
            <label
              ><input
                type="checkbox"
                id="wantTranscript"
                name="wantTranscript"
              />
              show per-position operations (small inputs only)</label
            >
          </div>

          <button type="submit">ğŸ“ Upload & Align</button>
        </form>
      </section>

      <div id="loading" style="display: none">ğŸ”„ Running alignmentâ€¦</div>
      <div id="results" style="display: none">
        <h2>Results</h2>
        <div id="results-content"></div>
        <div id="perpos" class="result-item" style="display: none">
          <div class="result-label">Per-position alignment</div>
          <div id="perpos-content"></div>
          <div style="margin-top: 6px; font-size: 0.9em; color: #666">
            M=match, X=mismatch, I=insert (extra reference base), D=delete
            (extra query base), S=skip (free over â€˜-â€™ in reference)
          </div>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
